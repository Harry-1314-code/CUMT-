# 中国矿业大学（北京）_教务助手

新版正方教务系统选课脚本

*此脚本可能也适用于其他使用新版正方教务系统的学校*

# 功能介绍

## 你可以做到

- 余课监控，发现有余量课程，声音、邮件提醒

- 自动抢课，不需要坐在电脑前手动刷新

- 自动换课，先退后选，帮你“改签”所选课程

- 一次请求，全部刷新，同时监控多门课程

- 输出课程列表

- 成绩查询

  

## 你不能做到

- 选容量已满的教学班
- 在选课开放时间之外选课
- 选择时间冲突的课程
- 提高网速
- 保证一定选到课


本程序只能用来捡漏，也就是选别人退的课。强烈不建议在选课系统刚刚开放的时候使用本脚本选课（脚本需要先加载所有课程信息，很容易timeout）


受限于网络和程序本身的延迟，本程序的【换课抢课】功能可能会出现原有课程被退掉，但新课程没有选课成功的状况。虽然这种情况出现的概率很低，而且程序中已经做了一些补救措施，但还是请您在使用本功能时予以注意。


```

然后直接运行main.py即可

## 使用

1. config.ini配置学号、密码，
username = 03221111 #学号
password = 1111111 #密码
xkxnm = 2025 #选课年份
xkxqm = 03 #选课学期，上03，下12
njdm_id = 2022 #年级
zyh_id = 0311 #专业代号，教务系统-按条件查询上课情况进去，筛选条件里，专业那个选项，例如机械工程（0311）

2. 配置好后，运行main.py,提示“请输入操作选项 (1为登录过期，重新登录；2为已登录)”，首次登录需要选1，,此时文件夹下生成一个验证码图片，输入该验证码，登录教务系统，后续只要没登录过期，选择2就行。
3. 按程序提示输入操作选项（最好先查个成绩，看是否登录正常）
4. 设置选课志愿信息，选课优先级 课程>任课教师>上课时间，具体规则请参照程序提示。如有不理解之处，请参考源代码。
5. 开始自动选课。

代码需要更新xkkz_id值，请自行更新（在选课预览的时候，打开选课页面，F12打开开发者工具，然后ctrl+f查找关键词xkkz_id，你选课页面查看体育课的时候，对应的xkkz_id就是体育课的xkkz_id）

main.py里面

    if kklxdm=="10":
        #xkkz_id=re.search(r"\(this,'10','(.*?)'",resZzxk.text).group(1)#通识选修
        bklx_id = "0"
        rwlx='2'
        xkkz_id=('2AD7B8D78E1F8097E0631E70A8C064F8')
        #xkkz_id=('2AAF34D0D4797A77E0631F70A8C0D6BC')
    elif kklxdm=="06":
        #xkkz_id=re.search(r"\(this,'06','(.*?)'",resZzxk.text).group(1)#体育课
        rwlx='3'
        bklx_id='7AFBDFC563CA0068E053C0A86D5C8F3D'
        xkkz_id=('2AC37F17F3D4366EE0631F70A8C04324')
        #xkkz_id=('1C2BD24F1CB39340E0631F70A8C05D3E')
    elif kklxdm=="02":
        #xkkz_id=re.search(r"\(this,'18','(.*?)'",resZzxk.text).group(1)#劳育实践课
        bklx_id = "0"
        xkkz_id=('1C2BD24F1CB39340E0631F70A8C05D3E')
    elif kklxdm=="01":
        #xkkz_id=re.search(r"\(this,'01','(.*?)'",resZzxk.text).group(1)#主修,跨专业选修课
        #xkkz_id=('1C2BD24F1CB39340E0631F70A8C05D3E')
        #xkkz_id=('2AAF34D0D4797A77E0631F70A8C0D6B')
        xkkz_id = ("1C2BD24F1CB39340E0631F70A8C05D3E")
        bklx_id = "0"
